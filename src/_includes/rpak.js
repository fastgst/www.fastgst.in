const RPAK=function(){"use strict";function r(){return Math.floor(Date.now()/1e3)}function t(){const r=new Date;return`${String(r.getUTCDate()).padStart(2,"0")}${String(r.getUTCMonth()+1).padStart(2,"0")}${r.getUTCFullYear()}`}function e(r){return r.split("").reverse().join("")}function n(r){const t=function(r){let t="";for(let e=0;e<r.length;e++)t+=String.fromCharCode(42^r.charCodeAt(e));return t}(r);if("undefined"!=typeof btoa)return btoa(t);if("undefined"!=typeof Buffer)return Buffer.from(t).toString("base64");throw new Error("E003")}function o(r){let t;if("undefined"!=typeof atob)t=atob(r);else{if("undefined"==typeof Buffer)throw new Error("E004");t=Buffer.from(r,"base64").toString("utf-8")}return function(r){let t="";for(let e=0;e<r.length;e++)t+=String.fromCharCode(42^r.charCodeAt(e));return t}(t)}return{build:function(o,i){if(void 0===o&&(o=4),void 0===i&&(i=""),"number"!=typeof o||o<1)throw new Error("E001");if("string"!=typeof i)throw new Error("E002");const f=r(),u=t(),a=f+parseInt(u,10);return`RPAK_${n(e(`${`${function(r){return String(r).padStart(2,"0")}(o)}${a}`}|${i}`))}`},restore:function(n){try{if(!n||!n.startsWith("RPAK_"))return{valid:!1,error:"E005"};let i=o(n.substring(5));i=e(i);const f=i.split("|");if(f.length<2)return{valid:!1,error:"E006"};const u=f[0],a=f.slice(1).join("|"),s=parseInt(u.substring(0,2),10);if(isNaN(s))return{valid:!1,error:"E007"};const d=parseInt(u.substring(2),10);if(isNaN(d))return{valid:!1,error:"E008"};const c=t(),l=d-parseInt(c,10),p=r(),g=p-l;return{valid:g>=0&&g<=s,validity:s,keyEpoch:l,currentEpoch:p,timeDifference:g,payload:a,expired:g>s,notYetValid:g<0}}catch(r){return{valid:!1,error:"E009"}}}}}();"undefined"!=typeof module&&module.exports&&(module.exports=RPAK);